# Tool to generate a service id and extract cloud credentials for cluster deployment on PowerVS using Installer Provisioned Infrastructure
## Prerequisites:
1. Access to an OpenShift Container Platform account with cluster administrator access
2. OpenShift CLI (oc)
3. IBM Cloud API key set in the environment using a command like
`export IBMCLOUD_API_KEY=<your IBM Cloud API key>`
4. IBM Cloud Resource group (recommended)

## This script executes the following steps:
1. Obtains the CCO container image from the OpenShift Container Platform release image.
2. Extracts the ccoctl binary from the CCO container image within the OpenShift Container Platform release image.
3. Extracts the credentials of _kind_ `IBMCloudPowerVSProviderSpec`
4. Create the service ID for each credential request, assigns the policies defined and generates the secret.

## Usage information
1. First, download this script into a directory of your preference and switch to that directory.
2. Move the script into an executable location and make it executable using commands such as 
```mv ccoctl.sh /usr/local/bin
chmod u+x /usr/local/bin/ccoctl.sh
```
3. Execute the script by running
`ccoctl.sh [flags]`

The script accepts the following flags, all of which are optional but some of which are highly recommanded to be set:
1. rg: It is highly recommended that this flag is specified. It accepts the name of the resource group that will be applicable to the manifests. This allows for fine-grained access to resources belonging to the specified resource group only. It defaults to the _default_ resource group that allows access to all the resources.
2. credreqs: Path to the directory where the credential requests will be stored, defaults to `./credreqs`.
3. log: Path to a file where the log generated by this script should be stored, defaults to `./.ccoctl.log`.
4. name: Service id name, defaults to _\<your system username>\-service-id_
5. pullSecret: Path to the file containing your RedHat pull secret, takes `${HOME}/.pull-secret` as the default path.
